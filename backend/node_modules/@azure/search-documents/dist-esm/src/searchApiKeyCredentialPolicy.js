// Copyright (c) Microsoft Corporation.
// Licensed under the MIT license.
import { BaseRequestPolicy } from "@azure/core-http";
const API_KEY_HEADER_NAME = "api-key";
/**
 * Create an HTTP pipeline policy to authenticate a request
 * using an `AzureKeyCredential` for Azure Cognitive Search
 */
export function createSearchApiKeyCredentialPolicy(credential) {
    return {
        create: (nextPolicy, options) => {
            return new SearchApiKeyCredentialPolicy(nextPolicy, options, credential);
        }
    };
}
/**
 * A concrete implementation of an AzureKeyCredential policy
 * using the appropriate header for Azure Cognitive Search
 */
class SearchApiKeyCredentialPolicy extends BaseRequestPolicy {
    constructor(nextPolicy, options, credential) {
        super(nextPolicy, options);
        this.credential = credential;
    }
    async sendRequest(webResource) {
        if (!webResource) {
            throw new Error("webResource cannot be null or undefined");
        }
        webResource.headers.set(API_KEY_HEADER_NAME, this.credential.key);
        return this._nextPolicy.sendRequest(webResource);
    }
}
//# sourceMappingURL=searchApiKeyCredentialPolicy.js.map